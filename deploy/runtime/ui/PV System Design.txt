PV System Design
839
1008
102
GroupBox

1
7
Name
5
9
GroupBox1
X
3
9
Y
3
6
Width
3
824
Height
3
132
Caption
5
13
System Sizing
Bold
2
1
GroupBox

1
7
Name
5
9
GroupBox2
X
3
9
Y
3
147
Width
3
824
Height
3
749
Caption
5
12
DC Subarrays
Bold
2
1
GroupBox

1
7
Name
5
9
GroupBox7
X
3
9
Y
3
903
Width
3
824
Height
3
89
Caption
5
30
Estimate of Overall Land Usage
Bold
2
1
Divider

1
9
Name
5
6
HLine1
X
3
12
Y
3
753
Width
3
802
Height
3
18
Orientation
3
0
Colour
4
120
120
120
255
Caption
5
52
Electrical Sizing Information (See Help for Details)
Bold
2
1
Divider

1
9
Name
5
8
HLine111
X
3
12
Y
3
228
Width
3
802
Height
3
18
Orientation
3
0
Colour
4
120
120
120
255
Caption
5
24
Electrical Configuration
Bold
2
1
Divider

1
9
Name
5
7
HLine12
X
3
12
Y
3
420
Width
3
802
Height
3
24
Orientation
3
0
Colour
4
120
120
120
255
Caption
5
22
Tracking & Orientation
Bold
2
1
Label

1
12
Name
5
9
Label1123
X
3
66
Y
3
369
Width
3
218
Height
3
21
Caption
5
38
String Vmp at reference conditions (V)
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
1
AlignTop
2
0
Label

1
12
Name
5
9
Label1124
X
3
66
Y
3
345
Width
3
218
Height
3
21
Caption
5
38
String Voc at reference conditions (V)
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
1
AlignTop
2
0
Label

1
12
Name
5
9
Label1133
X
3
66
Y
3
321
Width
3
218
Height
3
21
Caption
5
29
Number of modules in subarray
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
1
AlignTop
2
0
Label

1
12
Name
5
9
Label1145
X
3
66
Y
3
297
Width
3
218
Height
3
21
Caption
5
31
Strings in parallel in subarray
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
1
AlignTop
2
0
Label

1
12
Name
5
9
Label1146
X
3
66
Y
3
273
Width
3
218
Height
3
21
Caption
5
30
Modules per string in subarray
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
1
AlignTop
2
0
Label

1
12
Name
5
8
Label122
X
3
66
Y
3
681
Width
3
218
Height
3
21
Caption
5
12
Backtracking
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
1
AlignTop
2
0
Label

1
12
Name
5
10
Label12283
X
3
66
Y
3
657
Width
3
218
Height
3
21
Caption
5
28
Tracker rotation limit (deg)
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
1
AlignTop
2
0
Label

1
12
Name
5
10
Label12284
X
3
66
Y
3
609
Width
3
218
Height
3
21
Caption
5
13
Azimuth (deg)
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
1
AlignTop
2
0
Label

1
12
Name
5
7
Label13
X
3
66
Y
3
585
Width
3
218
Height
3
21
Caption
5
10
Tilt (deg)
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
1
AlignTop
2
0
Label

1
12
Name
5
6
Label2
X
3
51
Y
3
849
Width
3
264
Height
3
34
Caption
5
89
Voltage and capacity ratings are at module reference conditions shown on the Module page.
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
4294967295
WordWrap
2
1
AlignRight
2
0
AlignTop
2
1
Label

1
12
Name
5
8
Label213
X
3
12
Y
3
165
Width
3
800
Height
3
41
Caption
5
285
To model a system with one array, specify properties for Subarray 1 and disable Subarrays 2, 3, and 4.  To model a sytem with up to four subarrays connected in parallel to a single bank of inverters, for each subarray, check Enable and specify a number of strings and other properties.
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
4294967295
WordWrap
2
1
AlignRight
2
0
AlignTop
2
1
Label

1
12
Name
5
8
Label214
X
3
291
Y
3
924
Width
3
533
Height
3
66
Caption
5
169
SAM uses the total land area only when you specify a $/acre cost on the System Costs page: Total land area = total module area ÷ GCR × 0.0002471 (1 m² = 0.0002471 acre).
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
4294967295
WordWrap
2
1
AlignRight
2
0
AlignTop
2
1
Label

1
12
Name
5
6
Label4
X
3
420
Y
3
213
Width
3
110
Height
3
21
Caption
5
10
Subarray 2
TextColour
4
0
0
0
255
Bold
2
1
FontSize
3
0
WordWrap
2
0
AlignRight
2
0
AlignTop
2
0
Label

1
12
Name
5
7
Label41
X
3
555
Y
3
213
Width
3
110
Height
3
21
Caption
5
10
Subarray 3
TextColour
4
0
0
0
255
Bold
2
1
FontSize
3
0
WordWrap
2
0
AlignRight
2
0
AlignTop
2
0
Label

1
12
Name
5
8
Label411
X
3
690
Y
3
213
Width
3
110
Height
3
21
Caption
5
10
Subarray 4
TextColour
4
0
0
0
255
Bold
2
1
FontSize
3
0
WordWrap
2
0
AlignRight
2
0
AlignTop
2
0
Label

1
12
Name
5
9
Label4111
X
3
288
Y
3
213
Width
3
110
Height
3
21
Caption
5
10
Subarray 1
TextColour
4
0
0
0
255
Bold
2
1
FontSize
3
0
WordWrap
2
0
AlignRight
2
0
AlignTop
2
0
Label

1
12
Name
5
6
Label5
X
3
288
Y
3
249
Width
3
110
Height
3
21
Caption
5
16
(always enabled)
TextColour
4
128
128
128
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
0
AlignTop
2
0
Image

1
7
Name
5
8
Picture1
X
3
33
Y
3
453
Width
3
190
Height
3
102
Image
7
PV System Design_Picture1.png
Centered
2
1
Numeric

1
16
Name
5
14
batt_max_power
X
3
666
Y
3
105
Width
3
82
Height
3
21
Value
1
9999.000000
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
14
Numeric

1
16
Name
5
10
dcac_ratio
X
3
666
Y
3
81
Width
3
82
Height
3
21
Value
1
1.100000
Mode
3
1
Format
3
0
Decimals
3
2
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
3
Label

1
12
Name
5
8
gcr_info
X
3
21
Y
3
708
Width
3
795
Height
3
45
Caption
5
258
Ground coverage ratio is used (1) to determine when a one-axis tracking system will backtrack, (2) in self-shading calculations for fixed tilt or one-axis tracking systems on the Shading page, and (3) in the total land area calculation. See Help for details.
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
4294967295
WordWrap
2
1
AlignRight
2
0
AlignTop
2
1
Label

1
12
Name
5
9
gcr_label
X
3
84
Y
3
633
Width
3
200
Height
3
21
Caption
5
27
Ground coverage ratio (GCR)
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
1
AlignTop
2
0
Numeric

1
16
Name
5
14
inverter_count
X
3
135
Y
3
33
Width
3
82
Height
3
21
Value
1
1.000000
Mode
3
0
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
16
MultilineText

1
10
Name
5
14
layout_warning
X
3
327
Y
3
774
Width
3
478
Height
3
108
Text
5
0
Editable
2
0
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
21
Label

1
12
Name
5
14
lbl_multi_mppt
X
3
66
Y
3
393
Width
3
218
Height
3
21
Caption
5
32
Inverter MPPT input for subarray
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
1
AlignTop
2
0
Numeric

1
16
Name
5
16
mppt_hi_inverter
X
3
204
Y
3
825
Width
3
82
Height
3
21
Value
1
9999.000000
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
19
Numeric

1
16
Name
5
17
mppt_low_inverter
X
3
204
Y
3
801
Width
3
82
Height
3
21
Value
1
9999.000000
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
18
Numeric

1
16
Name
5
17
num_strings_total
X
3
399
Y
3
81
Width
3
82
Height
3
21
Value
1
0.000000
Mode
3
0
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
22
Label

1
12
Name
5
8
object 7
X
3
30
Y
3
63
Width
3
190
Height
3
43
Caption
5
61
Please specify the DC system size using "DC Subarrays" below.
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
1
AlignRight
2
0
AlignTop
2
1
Numeric

1
16
Name
5
17
subarray1_azimuth
X
3
288
Y
3
609
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
27
CheckBox

1
8
Name
5
19
subarray1_backtrack
X
3
288
Y
3
681
Width
3
101
Height
3
21
Caption
5
6
Enable
State
2
0
TabOrder
3
25
Numeric

1
16
Name
5
13
subarray1_gcr
X
3
288
Y
3
633
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
27
Numeric

1
16
Name
5
28
subarray1_modules_per_string
X
3
288
Y
3
273
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
0
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
23
MonthlyFactor

1
7
Name
5
22
subarray1_monthly_tilt
X
3
288
Y
3
582
Width
3
87
Height
3
24
Description
5
0
TabOrder
3
4294967295
Numeric

1
16
Name
5
20
subarray1_mppt_input
X
3
288
Y
3
393
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
0
Format
3
0
Decimals
3
0
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
16
Name
5
18
subarray1_nmodules
X
3
288
Y
3
321
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
0
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
23
Numeric

1
16
Name
5
18
subarray1_nstrings
X
3
288
Y
3
297
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
0
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
23
Numeric

1
16
Name
5
16
subarray1_rotlim
X
3
288
Y
3
657
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
27
Numeric

1
16
Name
5
20
subarray1_string_vmp
X
3
288
Y
3
369
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
23
Numeric

1
16
Name
5
20
subarray1_string_voc
X
3
288
Y
3
345
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
23
Numeric

1
16
Name
5
14
subarray1_tilt
X
3
288
Y
3
585
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
26
CheckBox

1
8
Name
5
21
subarray1_tilt_eq_lat
X
3
288
Y
3
561
Width
3
119
Height
3
21
Caption
5
13
Tilt=latitude
State
2
0
TabOrder
3
25
RadioChoice

1
10
Name
5
20
subarray1_track_mode
X
3
288
Y
3
444
Width
3
113
Height
3
119
Selection
3
4294967295
Items
6
5
Fixed
1-Axis
2-Axis
Azimuth Axis
Seasonal Tilt
ShowCaptions
2
1
Horizontal
2
0
TabOrder
3
24
Numeric

1
16
Name
5
17
subarray2_azimuth
X
3
420
Y
3
609
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
34
CheckBox

1
8
Name
5
19
subarray2_backtrack
X
3
420
Y
3
681
Width
3
101
Height
3
21
Caption
5
6
Enable
State
2
0
TabOrder
3
32
CheckBox

1
8
Name
5
16
subarray2_enable
X
3
420
Y
3
249
Width
3
101
Height
3
21
Caption
5
6
Enable
State
2
0
TabOrder
3
29
Numeric

1
16
Name
5
13
subarray2_gcr
X
3
420
Y
3
633
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
34
Numeric

1
16
Name
5
28
subarray2_modules_per_string
X
3
420
Y
3
273
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
0
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
30
MonthlyFactor

1
7
Name
5
22
subarray2_monthly_tilt
X
3
420
Y
3
582
Width
3
87
Height
3
24
Description
5
0
TabOrder
3
4294967295
Numeric

1
16
Name
5
20
subarray2_mppt_input
X
3
420
Y
3
393
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
0
Format
3
0
Decimals
3
0
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
16
Name
5
18
subarray2_nmodules
X
3
420
Y
3
321
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
0
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
30
Numeric

1
16
Name
5
18
subarray2_nstrings
X
3
420
Y
3
297
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
0
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
30
Numeric

1
16
Name
5
16
subarray2_rotlim
X
3
420
Y
3
657
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
34
Numeric

1
16
Name
5
20
subarray2_string_vmp
X
3
420
Y
3
369
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
30
Numeric

1
16
Name
5
20
subarray2_string_voc
X
3
420
Y
3
345
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
30
Numeric

1
16
Name
5
14
subarray2_tilt
X
3
420
Y
3
585
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
33
CheckBox

1
8
Name
5
21
subarray2_tilt_eq_lat
X
3
420
Y
3
561
Width
3
113
Height
3
21
Caption
5
13
Tilt=latitude
State
2
0
TabOrder
3
32
RadioChoice

1
10
Name
5
20
subarray2_track_mode
X
3
420
Y
3
444
Width
3
113
Height
3
119
Selection
3
4294967295
Items
6
5
Fixed
1-Axis
2-Axis
Azimuth Axis
Seasonal tilt
ShowCaptions
2
1
Horizontal
2
0
TabOrder
3
31
Numeric

1
16
Name
5
17
subarray3_azimuth
X
3
555
Y
3
609
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
41
CheckBox

1
8
Name
5
19
subarray3_backtrack
X
3
555
Y
3
681
Width
3
98
Height
3
21
Caption
5
6
Enable
State
2
0
TabOrder
3
39
CheckBox

1
8
Name
5
16
subarray3_enable
X
3
555
Y
3
249
Width
3
98
Height
3
21
Caption
5
6
Enable
State
2
0
TabOrder
3
36
Numeric

1
16
Name
5
13
subarray3_gcr
X
3
555
Y
3
633
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
41
Numeric

1
16
Name
5
28
subarray3_modules_per_string
X
3
555
Y
3
273
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
0
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
37
MonthlyFactor

1
7
Name
5
22
subarray3_monthly_tilt
X
3
555
Y
3
582
Width
3
87
Height
3
24
Description
5
0
TabOrder
3
4294967295
Numeric

1
16
Name
5
20
subarray3_mppt_input
X
3
555
Y
3
393
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
0
Format
3
0
Decimals
3
0
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
16
Name
5
18
subarray3_nmodules
X
3
555
Y
3
321
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
0
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
37
Numeric

1
16
Name
5
18
subarray3_nstrings
X
3
555
Y
3
297
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
0
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
37
Numeric

1
16
Name
5
16
subarray3_rotlim
X
3
555
Y
3
657
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
41
Numeric

1
16
Name
5
20
subarray3_string_vmp
X
3
555
Y
3
369
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
37
Numeric

1
16
Name
5
20
subarray3_string_voc
X
3
555
Y
3
345
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
37
Numeric

1
16
Name
5
14
subarray3_tilt
X
3
555
Y
3
585
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
40
CheckBox

1
8
Name
5
21
subarray3_tilt_eq_lat
X
3
555
Y
3
561
Width
3
116
Height
3
21
Caption
5
13
Tilt=latitude
State
2
0
TabOrder
3
39
RadioChoice

1
10
Name
5
20
subarray3_track_mode
X
3
555
Y
3
444
Width
3
113
Height
3
119
Selection
3
4294967295
Items
6
5
Fixed
1-Axis
2-Axis
Azimuth Axis
Seasonal tilt
ShowCaptions
2
1
Horizontal
2
0
TabOrder
3
38
Numeric

1
16
Name
5
17
subarray4_azimuth
X
3
690
Y
3
609
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
48
CheckBox

1
8
Name
5
19
subarray4_backtrack
X
3
690
Y
3
681
Width
3
101
Height
3
21
Caption
5
6
Enable
State
2
0
TabOrder
3
46
CheckBox

1
8
Name
5
16
subarray4_enable
X
3
690
Y
3
249
Width
3
98
Height
3
21
Caption
5
6
Enable
State
2
0
TabOrder
3
43
Numeric

1
16
Name
5
13
subarray4_gcr
X
3
690
Y
3
633
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
48
Numeric

1
16
Name
5
28
subarray4_modules_per_string
X
3
690
Y
3
273
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
0
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
44
MonthlyFactor

1
7
Name
5
22
subarray4_monthly_tilt
X
3
690
Y
3
582
Width
3
87
Height
3
24
Description
5
0
TabOrder
3
4294967295
Numeric

1
16
Name
5
20
subarray4_mppt_input
X
3
690
Y
3
393
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
0
Format
3
0
Decimals
3
0
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
16
Name
5
18
subarray4_nmodules
X
3
690
Y
3
321
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
0
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
44
Numeric

1
16
Name
5
18
subarray4_nstrings
X
3
690
Y
3
297
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
0
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
44
Numeric

1
16
Name
5
16
subarray4_rotlim
X
3
690
Y
3
657
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
48
Numeric

1
16
Name
5
20
subarray4_string_vmp
X
3
690
Y
3
369
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
44
Numeric

1
16
Name
5
20
subarray4_string_voc
X
3
690
Y
3
345
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
44
Numeric

1
16
Name
5
14
subarray4_tilt
X
3
690
Y
3
585
Width
3
100
Height
3
21
Value
1
0.000000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
47
CheckBox

1
8
Name
5
21
subarray4_tilt_eq_lat
X
3
690
Y
3
561
Width
3
113
Height
3
21
Caption
5
13
Tilt=latitude
State
2
0
TabOrder
3
46
RadioChoice

1
10
Name
5
20
subarray4_track_mode
X
3
690
Y
3
444
Width
3
113
Height
3
119
Selection
3
4294967295
Items
6
5
Fixed
1-Axis
2-Axis
Azimuth Axis
Seasonal tilt
ShowCaptions
2
1
Horizontal
2
0
TabOrder
3
45
Numeric

1
16
Name
5
15
system_capacity
X
3
399
Y
3
33
Width
3
82
Height
3
21
Value
1
9999.000000
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
7
Numeric

1
16
Name
5
10
total_area
X
3
399
Y
3
105
Width
3
82
Height
3
21
Value
1
9999.000000
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
11
Numeric

1
16
Name
5
26
total_dc_inverter_capacity
X
3
666
Y
3
57
Width
3
82
Height
3
21
Value
1
9999.000000
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
15
Numeric

1
16
Name
5
23
total_inverter_capacity
X
3
666
Y
3
33
Width
3
82
Height
3
21
Value
1
9999.000000
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
14
Numeric

1
16
Name
5
15
total_land_area
X
3
135
Y
3
954
Width
3
100
Height
3
21
Value
1
9999.000000
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
52
Numeric

1
16
Name
5
17
total_module_area
X
3
135
Y
3
927
Width
3
99
Height
3
21
Value
1
9999.000000
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
16
Name
5
13
total_modules
X
3
399
Y
3
57
Width
3
82
Height
3
21
Value
1
99999.000000
Mode
3
0
Format
3
0
Decimals
3
0
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
8
Numeric

1
16
Name
5
15
vdcmax_inverter
X
3
204
Y
3
777
Width
3
82
Height
3
21
Value
1
9999.000000
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
17

78
array_area
3
1
Array Land Area
m2
PV System Design
0
8
1
1
1
1
0.000000
Default
batt_max_power
3
1
Battery maximum power
kWdc
Battery
0
8
1
1
1
1
0.000000
Numeric
dcac_ratio
3
1
DC to AC ratio
 
PV System Design
0
8
1
1
1
1
1.100000
Numeric
inv_num_mppt
3
1
Number of inverter MPPT inputs
 
PV System Design
0
8
1
1
1
1
1.000000
Default
inverter_count
3
1
Number of inverters
 
PV System Design
15
=\pv_size_array
2
1
1
1
1
1.000000
Numeric
layout_warning
3
4
 
 
PV System Design
0
5
1
4
0
MultilineText
mppt_hi_inverter
3
1
Maximum MPPT voltage
Vdc
PV System Design
0
8
1
1
1
1
0.000000
Numeric
mppt_low_inverter
3
1
Minimum MPPT voltage
Vdc
PV System Design
0
8
1
1
1
1
0.000000
Numeric
num_enabled
3
1
 
 
PV System Design
0
8
1
1
1
1
0.000000
Default
num_strings_total
3
1
Total number of strings
 
PV System Design
32
=${pv.array.strings_in_parallel}
8
1
1
1
1
0.000000
Numeric
offset
3
1
Row offset
m
PV System Design
0
0
1
1
1
1
0.000000
Default
subarray1_azimuth
3
1
Azimuth 1
deg
PV System Design
0
3
1
1
1
1
180.000000
Numeric
subarray1_backtrack
3
1
Enable backtracking 1
 
PV System Design
0
3
1
1
1
1
0.000000
CheckBox
subarray1_gcr
3
1
Ground coverage ratio 1
 
PV System Design
0
3
1
1
1
1
0.300000
Default
subarray1_modules_per_string
3
1
Subarray 1 modules per string
 
PV System Design
15
=\pv_size_array
3
1
1
1
1
10.000000
Numeric
subarray1_monthly_tilt
3
2
Subarray 1 monthly tilt input for seasonal tilt arrays
degrees
PV System Design
0
1
1
2
1
12
0.000000 40.000000 40.000000 20.000000 20.000000 20.000000 20.000000 20.000000 20.000000 40.000000 40.000000 40.000000 

MonthlyFactor
subarray1_mppt_input
3
1
Subarray 1 inverter MPPT input
 
PV System Design
0
1
1
1
1
1
1.000000
Numeric
subarray1_nmodules
3
1
Subarray 1 number of modules
 
PV System Design
0
9
1
1
1
1
0.000000
Numeric
subarray1_nstrings
3
1
Number of parallel strings 1
 
PV System Design
215
=${pv.array.strings_in_parallel}
    - ?${pv.subarray2.enable}[0|${pv.subarray2.num_strings}]
    - ?${pv.subarray3.enable}[0|${pv.subarray3.num_strings}]
    - ?${pv.subarray4.enable}[0|${pv.subarray4.num_strings}]
3
1
1
1
1
0.000000
Numeric
subarray1_rotlim
3
1
Tracker rotation limit 1
degrees
PV System Design
0
3
1
1
1
1
45.000000
Numeric
subarray1_string_vmp
3
1
Subarray 2 string Vmp
V
PV System Design
0
9
1
1
1
1
0.000000
Numeric
subarray1_string_voc
3
1
Subarray 1 string Voc
V
PV System Design
0
9
1
1
1
1
0.000000
Numeric
subarray1_tilt
3
1
Tilt 1
deg
PV System Design
0
3
1
1
1
1
0.000000
Numeric
subarray1_tilt_eq_lat
3
1
 
 
PV System Design
0
3
1
1
1
1
0.000000
CheckBox
subarray1_track_mode
3
1
Tracking mode 1
 
PV System Design
46
Fixed|1 Axis|2 Axis|Azimuth Axis|Seasonal Tilt
3
1
1
1
1
0.000000
RadioChoice
subarray2_azimuth
3
1
Azimuth 2
deg
PV System Design
0
3
1
1
1
1
180.000000
Numeric
subarray2_backtrack
3
1
Enable backtracking 2
 
PV System Design
0
3
1
1
1
1
0.000000
CheckBox
subarray2_enable
3
1
Enable subarray 2
 
PV System Design
0
3
1
1
1
1
0.000000
CheckBox
subarray2_gcr
3
1
Ground coverage ratio 2
 
PV System Design
0
3
1
1
1
1
0.300000
Default
subarray2_modules_per_string
3
1
Subarray 2 modules per string
 
PV System Design
0
3
1
1
1
1
0.000000
Numeric
subarray2_monthly_tilt
3
2
Subarray 2 monthly tilt input for seasonal tilt arrays
degrees
PV System Design
0
1
1
2
1
12
0.000000 40.000000 40.000000 20.000000 20.000000 20.000000 20.000000 20.000000 20.000000 40.000000 40.000000 40.000000 

Default
subarray2_mppt_input
3
1
Subarray 2 inverter MPPT input
 
PV System Design
0
1
1
1
1
1
1.000000
Numeric
subarray2_nmodules
3
1
Subarray 2 number of modules
 
PV System Design
0
9
1
1
1
1
0.000000
Numeric
subarray2_nstrings
3
1
Number of parallel strings 2
 
PV System Design
0
3
1
1
1
1
0.000000
Numeric
subarray2_rotlim
3
1
Tracker rotation limit 2
degrees
PV System Design
0
3
1
1
1
1
45.000000
Numeric
subarray2_string_vmp
3
1
Subarray 2 string Vmp
V
PV System Design
0
9
1
1
1
1
0.000000
Numeric
subarray2_string_voc
3
1
Subarray 2 string Voc
V
PV System Design
0
9
1
1
1
1
0.000000
Numeric
subarray2_tilt
3
1
Tilt 2
deg
PV System Design
0
3
1
1
1
1
20.000000
Numeric
subarray2_tilt_eq_lat
3
1
 
 
PV System Design
0
3
1
1
1
1
0.000000
CheckBox
subarray2_track_mode
3
1
Tracking mode 2
 
PV System Design
46
Fixed|1 Axis|2 Axis|Azimuth Axis|Seasonal Tilt
3
1
1
1
1
0.000000
RadioChoice
subarray3_azimuth
3
1
Azimuth 3
deg
PV System Design
0
3
1
1
1
1
180.000000
Numeric
subarray3_backtrack
3
1
Enable backtracking 3
 
PV System Design
0
3
1
1
1
1
0.000000
CheckBox
subarray3_enable
3
1
Enable subarray 3
 
PV System Design
0
3
1
1
1
1
0.000000
CheckBox
subarray3_gcr
3
1
Ground coverage ratio 3
 
PV System Design
0
3
1
1
1
1
0.300000
Default
subarray3_modules_per_string
3
1
Subarray 3 modules per string
 
PV System Design
0
3
1
1
1
1
0.000000
Numeric
subarray3_monthly_tilt
3
2
Subarray 3 monthly tilt input for seasonal tilt arrays
degrees
PV System Design
0
1
1
2
1
12
0.000000 40.000000 40.000000 20.000000 20.000000 20.000000 20.000000 20.000000 20.000000 40.000000 40.000000 40.000000 

Default
subarray3_mppt_input
3
1
Subarray 3 inverter MPPT input
 
PV System Design
0
1
1
1
1
1
1.000000
Numeric
subarray3_nmodules
3
1
Subarray 3 number of modules
 
PV System Design
0
9
1
1
1
1
0.000000
Numeric
subarray3_nstrings
3
1
Number of parallel strings 3
 
PV System Design
0
3
1
1
1
1
0.000000
Numeric
subarray3_rotlim
3
1
Tracker rotation limit 3
degrees
PV System Design
0
3
1
1
1
1
45.000000
Numeric
subarray3_string_vmp
3
1
Subarray 3 string Vmp
V
PV System Design
0
9
1
1
1
1
0.000000
Numeric
subarray3_string_voc
3
1
Subarray 3 string Voc
V
PV System Design
0
9
1
1
1
1
0.000000
Numeric
subarray3_tilt
3
1
Tilt 3
deg
PV System Design
0
3
1
1
1
1
20.000000
Numeric
subarray3_tilt_eq_lat
3
1
 
 
PV System Design
0
3
1
1
1
1
0.000000
CheckBox
subarray3_track_mode
3
1
Tracking mode 3
 
PV System Design
46
Fixed|1 Axis|2 Axis|Azimuth Axis|Seasonal Tilt
3
1
1
1
1
0.000000
RadioChoice
subarray4_azimuth
3
1
Azimuth 4
deg
PV System Design
0
3
1
1
1
1
180.000000
Numeric
subarray4_backtrack
3
1
Enable backtracking 4
 
PV System Design
0
3
1
1
1
1
0.000000
CheckBox
subarray4_enable
3
1
Enable subarray 4
 
PV System Design
0
3
1
1
1
1
0.000000
CheckBox
subarray4_gcr
3
1
Ground coverage ratio 4
 
PV System Design
0
3
1
1
1
1
0.300000
Default
subarray4_modules_per_string
3
1
Subarray 4 modules per string
 
PV System Design
0
3
1
1
1
1
0.000000
Numeric
subarray4_monthly_tilt
3
2
Subarray 4 monthly tilt input for seasonal tilt arrays
degrees
PV System Design
0
1
1
2
1
12
0.000000 40.000000 40.000000 20.000000 20.000000 20.000000 20.000000 20.000000 20.000000 40.000000 40.000000 40.000000 

Default
subarray4_mppt_input
3
1
Subarray 4 inverter MPPT input
 
PV System Design
0
1
1
1
1
1
1.000000
Numeric
subarray4_nmodules
3
1
Subarray 4 number of modules
 
PV System Design
0
9
1
1
1
1
0.000000
Numeric
subarray4_nstrings
3
1
Number of parallel strings 4
 
PV System Design
0
3
1
1
1
1
0.000000
Numeric
subarray4_rotlim
3
1
Tracker rotation limit 4
degrees
PV System Design
0
3
1
1
1
1
45.000000
Numeric
subarray4_string_vmp
3
1
Subarray 4 string Vmp
V
PV System Design
0
9
1
1
1
1
0.000000
Numeric
subarray4_string_voc
3
1
Subarray 4 string Voc
V
PV System Design
0
9
1
1
1
1
0.000000
Numeric
subarray4_tilt
3
1
Tilt 4
deg
PV System Design
0
3
1
1
1
1
20.000000
Numeric
subarray4_tilt_eq_lat
3
1
 
 
PV System Design
0
3
1
1
1
1
0.000000
CheckBox
subarray4_track_mode
3
1
Tracking mode 4
 
PV System Design
46
Fixed|1 Axis|2 Axis|Azimuth Axis|Seasonal Tilt
3
1
1
1
1
0.000000
RadioChoice
system_capacity
3
1
Nameplate DC capacity
kWdc
PV System Design
0
8
1
1
1
1
0.000000
Numeric
total_area
3
1
Total module area
m²
PV System Design
0
8
1
1
1
1
0.000000
Numeric
total_dc_inverter_capacity
3
1
Total DC inverter capacity
kWdc
PV System Design
0
8
1
1
1
1
0.000000
Numeric
total_inverter_capacity
3
1
Total AC capacity
kWac
PV System Design
0
8
1
1
1
1
0.000000
Numeric
total_land_area
3
1
Total land area
acres
PV System Design
0
8
1
1
1
1
0.000000
Numeric
total_module_area
3
1
Total module area
m²
PV System Design
0
8
1
1
1
1
0.000000
Numeric
total_modules
3
1
Total number of modules
 
PV System Design
0
8
1
1
1
1
0.000000
Numeric
vdcmax_inverter
3
1
Maximum DC voltage
Vdc
PV System Design
0
8
1
1
1
1
0.000000
Numeric

7976
equations{ 'total_modules' } = define() {
	a = ${subarray1_modules_per_string} * ${subarray1_nstrings}
		+ (${subarray2_modules_per_string} * ${subarray2_nstrings}) * ${subarray2_enable}
		+ (${subarray3_modules_per_string} * ${subarray3_nstrings}) * ${subarray3_enable}
		+ (${subarray4_modules_per_string} * ${subarray4_nstrings}) * ${subarray4_enable};

	return a; };

equations{ 'system_capacity' } = define() {
	return ?${module_model}
[
	${spe_power},
	${cec_p_mp_ref},
	${6par_pmp},
	${snl_ref_pmp},
	${sd11par_Pmp0}
] 
	* ${total_modules} / 1000; };
	
equations{ 'total_area' } = define() {
	return ?${module_model}
[
	${spe_area},
	${cec_area},
	${6par_area},
	${snl_area},
	${sd11par_area}
] 
	* ${total_modules}; };

equations{ 'total_module_area' } = define() {
	return ${total_area};
};

equations{ 'dcac_ratio' } = define() {
	return ${system_capacity} /${total_inverter_capacity} ;
};

equations{ 'inv_num_mppt' } = define() {
	return ?${inverter_model}
	[
		${inv_snl_num_mppt},
		${inv_ds_num_mppt}, 
		${inv_pd_num_mppt}, 
		${inv_cec_num_mppt}
	] ;
};

equations{ 'subarray1_string_voc' } = define() {
	return ?${module_model}
[
	${spe_voc},
	${cec_v_oc_ref},
	${6par_voc},
	${snl_voco},
	${sd11par_Voc0}
]
	* ${subarray1_modules_per_string}; };
	
equations{ 'subarray2_string_voc' } = define() {
	return ?${module_model}
[
	${spe_voc},
	${cec_v_oc_ref},
	${6par_voc},
	${snl_voco},
	${sd11par_Voc0}
]
	* ${subarray2_modules_per_string}; };
	
equations{ 'subarray3_string_voc' } = define() {
	return ?${module_model}
[
	${spe_voc},
	${cec_v_oc_ref},
	${6par_voc},
	${snl_voco},
	${sd11par_Voc0}
]
	* ${subarray3_modules_per_string}; };
	
equations{ 'subarray4_string_voc' } = define() {
	return ?${module_model}
[
	${spe_voc},
	${cec_v_oc_ref},
	${6par_voc},
	${snl_voco},
	${sd11par_Voc0}
]
	* ${subarray4_modules_per_string}; };
	
equations{ 'subarray1_string_vmp' } = define() {
	return ?${module_model}
[
	${spe_vmp},
	${cec_v_mp_ref},
	${6par_vmp},
	${snl_ref_vmp},
	${sd11par_Vmp0}
]
	* ${subarray1_modules_per_string}; };
	
equations{ 'subarray2_string_vmp' } = define() {
	return ?${module_model}
[
	${spe_vmp},
	${cec_v_mp_ref},
	${6par_vmp},
	${snl_ref_vmp},
	${sd11par_Vmp0}
]
	* ${subarray2_modules_per_string}; };
	
equations{ 'subarray3_string_vmp' } = define() {
	return ?${module_model}
[
	${spe_vmp},
	${cec_v_mp_ref},
	${6par_vmp},
	${snl_ref_vmp},
	${sd11par_Vmp0}
]
	* ${subarray3_modules_per_string}; };
	
equations{ 'subarray4_string_vmp' } = define() {
	return ?${module_model}
[
	${spe_vmp},
	${cec_v_mp_ref},
	${6par_vmp},
	${snl_ref_vmp},
	${sd11par_Vmp0}
]
	* ${subarray4_modules_per_string}; };

equations{ 'total_inverter_capacity' } = define() {
	return ?${inverter_model} 
[ 
	${inv_snl_paco},
	${inv_ds_paco}, 
	${inv_pd_paco}, 
	${inv_cec_cg_paco}
] 
	* ${inverter_count} /1000; };

equations{ 'total_dc_inverter_capacity' } = define() {
	return ?${inverter_model} 
[ 
	${inv_snl_pdco},
	${inv_ds_pdco}, 
	${inv_pd_pdco}, 
	${inv_cec_cg_pdco}
] 
	* ${inverter_count} /1000; };
	
equations{ 'vdcmax_inverter' } = define() {
	return ?${inverter_model}
[
	${inv_snl_vdcmax},
	${inv_ds_vdcmax},
	${inv_pd_vdcmax},
	${inv_cec_cg_vdcmax}
]; };

equations{ 'mppt_low_inverter' } = define() {
	return ?${inverter_model} 
[ 	
	${inv_snl_mppt_low}, 
	${inv_ds_mppt_low}, 
	${inv_pd_mppt_low},
	${inv_cec_cg_mppt_low}	
]; };

equations{ 'mppt_hi_inverter' } = define() {
	return ?${inverter_model} 
[ 
	${inv_snl_mppt_hi}, 
	${inv_ds_mppt_hi},
	${inv_pd_mppt_hi},
	${inv_cec_cg_mppt_hi}
]; };

equations{ 'num_enabled' } = define() {
	return 1+${subarray2_enable}+${subarray3_enable}+${subarray4_enable}; };

equations{ 'num_strings_total' } = define() {
	return ${subarray1_nstrings} + ${subarray2_nstrings} + ${subarray3_nstrings} + ${subarray4_nstrings}; };

equations{ 'total_land_area' } = define() {
	area = ?${module_model}
	[
		${spe_area},
		${cec_area},
		${6par_area},
		${snl_area},
		${sd11par_area}
	] ;
	land = area *
		(${subarray1_modules_per_string}*${subarray1_nstrings}/${subarray1_gcr} +
		 ${subarray2_enable}*${subarray2_modules_per_string}*${subarray2_nstrings}/${subarray2_gcr} + 
		 ${subarray3_enable}*${subarray3_modules_per_string}*${subarray3_nstrings}/${subarray3_gcr} +
		 ${subarray4_enable}*${subarray4_modules_per_string}*${subarray4_nstrings}/${subarray4_gcr});
	return land	* 0.0002471; }; //convert to acres

equations{ 'array_area' } = define() {
	return ${total_area}; };

equations{ 'layout_warning'} = define(){

	message = '';
	
	// DC-connected battery parameters (assumed to use common inverter)
	dc_connected_battery = false;
	f = financing();
	if (f != "LCOE Calculator" && f != "None")
	{
		if (${en_batt}){
			if (${batt_ac_or_dc} == 0)
			{
				value = (${system_capacity} + ${batt_max_power})/${total_inverter_capacity};
				value_no_batt = (${system_capacity})/${total_inverter_capacity};
				
				message += ('DC/AC ratio for PV only is ' + sprintf('%.2f', value_no_batt) + '.\nActual DC/AC ratio with DC-connected battery (common inverter) is ' +  sprintf('%.2f', value) + '.\n');
				dc_connected_battery = true;
			}
		}

	}
	
	//string voltage information	
	mod_vmp= ?${module_model} [	${spe_vmp},${cec_v_mp_ref},${6par_vmp},${snl_ref_vmp},${sd11par_Vmp0}];
	mod_voc= ?${module_model} [	${spe_voc},${cec_v_oc_ref},${6par_voc},${snl_ref_voc},${sd11par_Voc0}];

	min_modules = ceil(${mppt_low_inverter} / mod_vmp);
	max_modules = floor(${mppt_hi_inverter} / mod_voc);
	if ( ${mppt_low_inverter} == 0 || ${mppt_hi_inverter} == 0 )
	{
		message +='This inverter does not have data for MPPT voltage limits, so SAM cannot calculate MPPT clipping.\n';
	}
	elseif (max_modules < min_modules)
	{
		message += 'For this combination of module and inverter, it is not possible to size the string to keep string Voc and Vmp within the MPPT voltage limits. ';
		message += 'To avoid inverter MPPT clipping, try a different module or inverter.\n';
	}
	else 
	{
		//string voc & vmp
		voc = [${subarray1_string_voc}, ${subarray2_enable} * ${subarray2_string_voc}, ${subarray3_enable} * ${subarray3_string_voc}, ${subarray4_enable} * ${subarray4_string_voc}];
		vmp = [${subarray1_string_vmp}, ${subarray2_enable} * ${subarray2_string_vmp}, ${subarray3_enable} * ${subarray3_string_vmp}, ${subarray4_enable} * ${subarray4_string_vmp}];

		for (i=0; i<4; i++)
		{
			if (voc[i] != 0 && (voc[i] < ${mppt_low_inverter} || vmp[i] < ${mppt_low_inverter}))
				message += 'Subarray ' + to_string(i+1) + ' string voltage is below the inverter minimum MPPT voltage at reference conditions. Consider using more modules per string.\n';
			else if (voc[i] != 0 && (voc[i] > ${vdcmax_inverter} || vmp[i] > ${vdcmax_inverter}))
				message += 'Subarray ' + to_string(i+1) + ' string voltage exceeds the inverter maximum rated voltage at reference conditions. Consider using fewer modules per string.\n';
			else if (voc[i] != 0 && (voc[i] > ${mppt_hi_inverter} || vmp[i] > ${mppt_hi_inverter}))
				message += 'Subarray ' + to_string(i+1) + ' string voltage exceeds the inverter maximum MPPT voltage at reference conditions. Consider using fewer modules per string.\n';
		}
	}

	if (message == '')
		message = 'No system sizing messages.';
	return message; 
};

equations{ 'subarray1_nmodules' } = define() 
{
	return ${subarray1_modules_per_string} * ${subarray1_nstrings};
};

equations{ 'subarray2_nmodules' } = define() 
{
	return ${subarray2_enable} * ${subarray2_modules_per_string} * ${subarray2_nstrings};
};

equations{ 'subarray3_nmodules' } = define() 
{
	return ${subarray3_enable} * ${subarray3_modules_per_string} * ${subarray3_nstrings};
};

equations{ 'subarray4_nmodules' } = define() 
{
	return ${subarray4_enable} * ${subarray4_modules_per_string} * ${subarray4_nstrings};
};

equations{ 'batt_max_power' } = define() 
{
	max_power = 0;
	f = financing();
	if (f != "LCOE Calculator" && f != "None")
	{
		if (${en_batt})
			max_power = ${batt_power_discharge_max};
	}
	return max_power;
};

4885
//show warning about MPPT input number
function mppt_warning()
{
	x = false;
	for (i = 1; i <=4; i++)
	{
		en = true;
		if ( i != 1)
			en = value('subarray' + to_string(i) + '_enable');
		var = 'subarray' + to_string(i) + '_mppt_input';
		if (en && value(var) > value('inv_num_mppt'))
			x = true;
	}
	if (x) msgbox('One or more specified subarray MPPT inputs exceed the number of inputs specified on the Inverter page.');
}

//shows or hides all subarray inputs, to be used when subarrays are enabled or disabled
function sysdesign_show_hide_subarray_inputs( isub, en)
{
	prefix = "subarray" + to_string(isub) + "_";
	all_subarray_variables = [		
		"azimuth",
		"backtrack",
		"gcr",
		"modules_per_string",
		"monthly_tilt", 
		"mppt_input", 
		"nmodules",
		"nstrings",
		"rotlim",
		"string_vmp",
		"string_voc",
		"tilt",
		"tilt_eq_lat",
		"track_mode" ];
		
	//hide all subarray related inputs if the subarray is disabled
	if (!en)
	{
		for (i=0;i<#all_subarray_variables;i++)
			show( prefix + all_subarray_variables[i], 0 );
	}
	
	//if subarray is enabled, then need to show all inputs, then fix tracking inputs
	else
	{
		//show all inputs
		for (i=0;i<#all_subarray_variables;i++)
			show( prefix + all_subarray_variables[i], 1 );

		//MPPT inputs only show up if multi-MPPT inverter specified
		multi_mppt = ( value('inv_num_mppt') > 1 );
		if (!multi_mppt) //set mppt input back to 1 if not multi-mppt so that simulation will run correctly
			value(prefix + 'mppt_input', 1);
		show( prefix + "mppt_input", multi_mppt);
		
		//Tracking inputs
		tracking = value(prefix + "track_mode");
		//seasonal tilt vs normal tilts
		seasonal = (tracking == 4);
		show(prefix + "monthly_tilt", seasonal);
		show(prefix + "tilt_eq_lat", !seasonal);
		show(prefix + "tilt", !seasonal);
		//tilt=lat checkbox: subarray must be enabled and tracking mode must be fixed, 1-axis, or A-axis	
		enable(prefix + "tilt_eq_lat", (tracking == 0 || tracking == 1 || tracking == 3));	
		//tilt: subarray must be enabled, tracking mode must be fixed, 1-axis, or A-axis, and tilt=lat must not be checked
		tel = value(prefix+"tilt_eq_lat");
		enable(prefix + "tilt", (tel==0) && (tracking == 0 || tracking == 1 || tracking == 3));
		//azimuth: subarray must be enabled, tracking mode must be fixed, 1-axis, or seasonal
		enable( prefix+"azimuth", (tracking == 1 || tracking == 0 || tracking == 4) );	
		//tracker rotation limit and backtracking: subarray must be enabled, tracking mode must be 1-axis
		enable( prefix+"rotlim", (tracking == 1) );
		enable( prefix+"backtrack", (tracking==1) );	
	}
	
	refresh();
}

on_load{'PV System Design'} = define()
{
	// show/hide/enable/disable inputs for all subarrays
	sysdesign_show_hide_subarray_inputs(1, 1);
	sysdesign_show_hide_subarray_inputs(2, value('subarray2_enable'));
	sysdesign_show_hide_subarray_inputs(3, value('subarray3_enable'));
	sysdesign_show_hide_subarray_inputs(4, value('subarray4_enable'));
	// show/hide label for multiple MPPT inputs
	multi_mppt = ( value('inv_num_mppt') > 1 );
	show('lbl_multi_mppt', multi_mppt);
	// show/hide battery max power input
	battery = false;
	f = financing();
	if (f != "LCOE Calculator" && f != "None")
		if (${en_batt})
			battery = true;
	show('batt_max_power', battery);
	// warning for MPPT input > number of inverter inputs
	if (multi_mppt)	mppt_warning();
};

on_change{'subarray2_enable'} = define() { sysdesign_show_hide_subarray_inputs( 2, value('subarray2_enable') ); };
on_change{'subarray3_enable'} = define() { sysdesign_show_hide_subarray_inputs( 3, value('subarray3_enable') ); };
on_change{'subarray4_enable'} = define() { sysdesign_show_hide_subarray_inputs( 4, value('subarray4_enable') ); };

on_change{'subarray1_tilt_eq_lat'} = define() { sysdesign_show_hide_subarray_inputs( 1, 1 ); };
on_change{'subarray2_tilt_eq_lat'} = define() { sysdesign_show_hide_subarray_inputs( 2, value('subarray2_enable') ); };
on_change{'subarray3_tilt_eq_lat'} = define() { sysdesign_show_hide_subarray_inputs( 3, value('subarray3_enable') ); };
on_change{'subarray4_tilt_eq_lat'} = define() { sysdesign_show_hide_subarray_inputs( 4, value('subarray4_enable')); };

on_change{'subarray1_track_mode'} = define() {  sysdesign_show_hide_subarray_inputs( 1, 1 );  };
on_change{'subarray2_track_mode'} = define() {  sysdesign_show_hide_subarray_inputs( 2, value('subarray2_enable') );  };
on_change{'subarray3_track_mode'} = define() {  sysdesign_show_hide_subarray_inputs( 3, value('subarray3_enable') );  };
on_change{'subarray4_track_mode'} = define() {  sysdesign_show_hide_subarray_inputs( 4, value('subarray4_enable') );  };

on_change{'subarray1_mppt_input'} = define() {  mppt_warning();  };
on_change{'subarray2_mppt_input'} = define() {  mppt_warning();  };
on_change{'subarray3_mppt_input'} = define() {  mppt_warning();  };
on_change{'subarray4_mppt_input'} = define() {  mppt_warning();  };